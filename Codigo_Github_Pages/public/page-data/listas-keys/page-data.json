{"componentChunkName":"component---src-templates-blog-post-js","path":"/listas-keys/","result":{"data":{"site":{"siteMetadata":{"title":"Librería ReactJS"}},"markdownRemark":{"id":"fc4253bf-e65e-583d-801a-7d619bd0a444","excerpt":"Una key es un atributo especial string que deberemos incluir cuando creemos listas de elementos o componentes como arrays. React debe reconocer para su correcto…","html":"<p>Una <strong>key</strong> es un atributo especial <strong>string</strong> que deberemos incluir cuando creemos listas de elementos o componentes como arrays.</p>\n<p>React debe reconocer para su correcto funcionamiento que elementos son los que cambian para poder <strong>agregar</strong>, <strong>eliminar</strong> o <strong>modificar</strong> elementos dentro de una lista, para ello utilizaremos la propiedad <strong>key</strong>.</p>\n<p>Las keys deben ser proporcionadas a los elementos dentro del array, para proporcionar a dichos elementos una identidad con el fin de poder identificarlos y diferenciarlos, como por ejemplo:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function Lista_Numeros(props) {\n  const numeros = props.numeros;\n  const lista = numeros.map((numero) =&gt;\n    &lt;li key={numero.toString()}&gt;\n      {numero}\n    &lt;/li&gt;\n  );\n  return (\n    &lt;ul&gt;{lista}&lt;/ul&gt;\n  );\n}\n\nconst numeros = [1, 2, 3, 4, 5];\nReactDOM.render(\n  &lt;Lista_Numeros numeros={numeros} /&gt;,\n  document.getElementById(&#39;root&#39;)\n);</code></pre></div>\n<p>La funcion <strong>map()</strong> lo que hace es coger cada elemento del array inicial que tenemos que es <strong>[1, 2, 3, 4, 5]</strong>, para guardarlo en nuestro caso en la variable <strong>lista</strong> que lo que contendrá es el listado de ese array que vamos a mostrar por pantalla.</p>\n<p>Podemos ver este ejemplo en <a href=\"https://codepen.io/franberchez/pen/OJJzKBM?editors=1011\">CodePen</a>.</p>\n<p>Como tenemos instalado node.js en nuestro ordenador personal para poder trabajar con React podemos probar de una forma muy gráficay sencilla la funcionalidad que nos proporciona <strong>map()</strong>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3543a3a63f67166b9fc03fc6d10cea4b/3aa4b/map.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.724409448818896%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvklEQVQoz42QyW7EIBAF+awcbGgwYOiFNh4rM0mkSD7n/+9xlnNCHVsqPVUbfQ/9hH6m/Yz3jyQ7iejj5YFY53l2f2IacYlZqHAtuwpWnL6x1rr/MNvGS7DgngCmEKbrdJluDNMEm9TjJsIrUy6lIKIHGJMb9Y3vz9q4CJdaKzF7D3ZE1obHTd9ej01JWyXE3vtylYw0q9KafY5uCW5NEEJww5jeJaeQ4xyXL3lw81dm4ZQigL06vXcw9qofPgG194xfnQV6BwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Ops, esta imagen no se ha cargado\"\n        title=\"Ops, esta imagen no se ha cargado\"\n        src=\"/static/3543a3a63f67166b9fc03fc6d10cea4b/b9e4f/map.png\"\n        srcset=\"/static/3543a3a63f67166b9fc03fc6d10cea4b/cf440/map.png 148w,\n/static/3543a3a63f67166b9fc03fc6d10cea4b/d2d38/map.png 295w,\n/static/3543a3a63f67166b9fc03fc6d10cea4b/b9e4f/map.png 590w,\n/static/3543a3a63f67166b9fc03fc6d10cea4b/3aa4b/map.png 635w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Como podemos ver lo primero que hacemos es crear un array de cuatro elementos de nombre <strong>a</strong>. Y a continuación lo que creamos es una copia del array <strong>a</strong> con la función <strong>map()</strong> y usando una funcion flecha, indicaremos que para todo elemento <strong>e</strong> que recorramos le sumaremos uno, aunque como podemos observar nuestro array <strong>a</strong> original sigue intacto.</p>\n<p>Para elegir una <strong>key</strong> de forma óptima usaremos un string que identifique únicamente a un elemento de la lista entre sus hermanos.</p>\n<p>No se recomienda usar índices para keys si el orden de los índices puede cambiar ya que esto podría impactar negativamente en el rendimiento pudiendo causar problemas con el estado del componente.</p>\n<h2>Extracción de componentes con keys</h2>\n<p>Las keys solo tienen sentido en el contexto del array que las envuelve, ya que por ejemplo si extrayesemos un componente <strong>ListItem</strong>, deberías mantener esa key en los elementos <strong><code class=\"language-text\">&lt;ListItem /&gt;</code></strong> del array, en lugar de en el elemento <strong><code class=\"language-text\">&lt;li&gt;</code></strong> del propio <strong>ListItem</strong>.</p>\n<p>Por ejemplo usar <strong>key</strong> no tiene ningún sentido:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function Lista_Numeros(props) {\n  const valor = props.valor;\n  return (\n    // Aquí el uso de key es incorrecto porque no hay ningún array, si en vez de &quot;valor&quot; usasemos &quot;numeros&quot; si que lo necesitaríamos\n    &lt;li key={value.toString()}&gt;\n      {value}\n    &lt;/li&gt;\n  );\n}\n\nconst numeros = [1, 2, 3, 4, 5];\nReactDOM.render(\n  &lt;Lista_Numeros numeros={numeros} /&gt;,\n  document.getElementById(&#39;root&#39;)\n);</code></pre></div>\n<h2>Las keys deben ser únicas solo entre hermanos</h2>\n<p>Las keys que usemos deben ser únicas entre sus hermanos, aunque no necesitan serlo de forma global. Hemos de puntualizar que podremos usar las mismas keys cuando creemos dos arrays diferentes.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// Le paso props que es como si pasase un argumento de mi Array\nfunction Mostrar(props) {\n  // Recorro con la funcion map el titulo de cada elemento del array y los muestro como un vector\n  const listado = (\n    &lt;ul&gt;\n      {props.contenido.map((subido) =&gt;\n        &lt;li key={subido.id}&gt;\n          {subido.titulo}\n        &lt;/li&gt;\n      )}\n    &lt;/ul&gt;\n  );\n  \n  // Recorro con la funcion map el titulo y el parrafo de cada elemento del array y los muestro como titulo y subtitulo\n  const formato_texto = props.contenido.map((subido) =&gt;\n    &lt;div key={subido.id}&gt;\n      &lt;h3&gt;{subido.titulo}&lt;/h3&gt;\n      &lt;p&gt;{subido.parrafo}&lt;/p&gt;\n    &lt;/div&gt;\n  );\n                                            \n  return (\n    &lt;div&gt;\n      {listado}\n      &lt;hr /&gt;\n      {formato_texto}\n    &lt;/div&gt;\n  );\n}\n\n// Esto es un array\nconst contenido = [\n  {id: 1, titulo: &#39;Hola Mundo&#39;, parrafo: &#39;Estoy de vuelta!&#39;},\n  {id: 2, titulo: &#39;Adios Mundo&#39;, parrafo: &#39;Ya me voy!&#39;}\n];\nReactDOM.render(\n  &lt;Mostrar contenido={contenido} /&gt;,\n  document.getElementById(&#39;root&#39;)\n);</code></pre></div>\n<p>Puedes verlo y probarlo en <a href=\"https://codepen.io/franberchez/pen/eYYxKMb?editors=1010\">codepen</a>.</p>\n<p>Las keys sirven como sugerencia para React pero no son pasadas a tus componentes. Si necesitas usar el mismo valor en tu componente, deberás pasar la <strong>key</strong> explícitamente como una propiedad con un nombre diferente.</p>\n<h2>Enlaces de interés</h2>\n<ul>\n<li><a href=\"https://es.reactjs.org/docs/lists-and-keys.html\">https://es.reactjs.org/docs/lists-and-keys.html</a></li>\n<li><a href=\"https://medium.com/@simonhoyos/trabajando-con-listas-en-react-970865e8b8b6\">https://medium.com/@simonhoyos/trabajando-con-listas-en-react-970865e8b8b6</a></li>\n<li><a href=\"https://stackoverflow.com/questions/39549424/how-to-create-unique-keys-for-react-elements/39549510\">https://stackoverflow.com/questions/39549424/how-to-create-unique-keys-for-react-elements/39549510</a></li>\n<li><a href=\"https://medium.com/@xadrijo/explorando-la-funci%C3%B3n-map-en-javascript-c04c42773fb6\">https://medium.com/@xadrijo/explorando-la-funci%C3%B3n-map-en-javascript-c04c42773fb6</a></li>\n<li><a href=\"https://dev.to/jtonzing/the-significance-of-react-keys---a-visual-explanation--56l7\">https://dev.to/jtonzing/the-significance-of-react-keys---a-visual-explanation—56l7</a></li>\n<li><a href=\"https://medium.com/@adhithiravi/why-do-i-need-keys-in-react-lists-dbb522188bbb\">https://medium.com/@adhithiravi/why-do-i-need-keys-in-react-lists-dbb522188bbb</a></li>\n</ul>","frontmatter":{"title":"Listas y Keys","date":"November 11, 2019","description":""}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/listas-keys/","previous":{"fields":{"slug":"/renderizado-condicional/"},"frontmatter":{"title":"Renderizado condicional"}},"next":{"fields":{"slug":"/manejador-eventos/"},"frontmatter":{"title":"Manejador de eventos"}}}}}